import wixWindow from 'wix-window';
import wixData from 'wix-data';
import { session } from 'wix-storage';

let thisUser
let ratings = null;
let average = null;
let allRatings = null;
allRatings = [];
ratings = [];
average = [];
let agentAverage
let ratingsApproved;
let showReviewsCount = 0;
let count = 0
let allApproved = 0;

$w.onReady(function () {

    $w("#leaveReview3").enable();
    $w("#leaveReview2").enable();
    $w("#leaveReview1").enable();
    // Get the user's selected template from the dataset
    $w('#agentsDataset').onReady(() => {
        const userTemplate = $w('#agentsDataset').getCurrentItem().template;
        session.setItem("Template",userTemplate)
        var itemData = $w('#agentsDataset').getCurrentItem()
        let userRatings = itemData.ratings;
        

        if (userRatings !== undefined) {

            getAgentRatingsAverage(itemData._id);

        } else if (userRatings == undefined) {

            console.log("No Ratings Found On Load")

            $w("#quantity").text = "No reviews"
            $w("#s1").hide();
            $w("#s2").hide();
            $w("#s3").hide();
            $w("#s4").hide();
            $w("#s5").hide();

        }

        let status = "Approved";
        let agentEmail = itemData.email
        session.setItem("agentEmail", agentEmail)

        if(userTemplate == "Template1"){
            console.log("TEMPLATE 1")
            getReviewsOne(agentEmail, status)
        }

        if(userTemplate == "Template2"){
             console.log("TEMPLATE 2")
            getReviewsTwo(agentEmail, status)
        }

        if(userTemplate == "Template3"){
             console.log("TEMPLATE 3")
            getReviews(agentEmail, status)
        }
        

        console.log(agentEmail);

        // Set the state of the multistate box based on the user's template
        let stateName;
        switch (userTemplate) {
        case 'Template1':
            stateName = 'Template1';
            break;
        case 'Template2':
            stateName = 'Template2';
            break;
        case 'Template3':
            stateName = 'Template3';
            break;
        default:
            stateName = 'Template1'; // default state
        }
        $w('#templateMultistateBox').changeState(stateName); // Change the state name as needed

        if (itemData.achievements === undefined || itemData.achievements === "") {
            $w('#t3achievements').hide()
            $w('#t2achievements').hide()
            $w('#t1achievements').hide()
        }
        if (itemData.facebookUrl === undefined || itemData.facebookUrl === "") {
            $w('#t1facebook').collapse()
            $w('#t2facebook').collapse()
            $w('#t3facebook').collapse()
        }
        if (itemData.linkedinUrl === undefined || itemData.linkedinUrl === "") {
            $w('#t1linkedin').collapse()
            $w('#t2linkedin').collapse()
            $w('#t3linkedin').collapse()
        }
        if (itemData.instagramUrl === undefined || itemData.instagramUrl === "") {
            $w('#t1instagram').collapse()
            $w('#t2instagram').collapse()
            $w('#t3instagram').collapse()
        }
        if (itemData.xurl === undefined || itemData.xurl === "") {
            $w('#t1x').collapse()
            $w('#t2x').collapse()
            $w('#t3x').collapse()
        }

    });
});

$w.onReady(function () {

    /*
    $w("#leaveReview1").onClick(async (event) => {
        const user = await $w("#agentsDataset").getCurrentItem();
        const dataForLightbox = {
            userId: user._id
        };
        let result = await wixWindow.openLightbox('Write A Review', dataForLightbox);
    });
    */

});

export function leaveReview3_click(event) {

    let userData = $w("#agentsDataset").getCurrentItem();

    wixWindow.openLightbox('Write A Review', userData)
        .then((data) => {

            let receivedData = data;

            console.log("Data Received: ", receivedData)

            if (receivedData === "Reviewed") {

                $w("#leaveReview3").label = "Review Received"
                $w("#leaveReview3").disable();

            }
        });
}

export function leaveReview2_click(event) {
let userData = $w("#agentsDataset").getCurrentItem();

    wixWindow.openLightbox('Write A Review', userData)
        .then((data) => {

            let receivedData = data;

            console.log("Data Received: ", receivedData)

            if (receivedData === "Reviewed") {

                $w("#leaveReview2").label = "Review Received"
                $w("#leaveReview2").disable();

            }
        });
}

export function leaveReview_click(event) {
let userData = $w("#agentsDataset").getCurrentItem();

    wixWindow.openLightbox('Write A Review', userData)
        .then((data) => {

            let receivedData = data;

            console.log("Data Received: ", receivedData)

            if (receivedData === "Reviewed") {

                $w("#leaveReview1").label = "Review Received"
                $w("#leaveReview1").disable();

            }
        });
}

export function getReviews(email, status) { //--Template Three--//
    ratingsApproved = null;
    ratingsApproved = [];
    let thisTotal = 3
    let newItems = null;
    newItems = [];
    let countedTotal = 0

    console.log("Get Ratings:")

    wixData.query("Team")
        .eq("email", email)
        .find()
        .then((results) => {
            console.log("Found user", results)

            let userRatings = results.items[0].ratings;
            let totalRatingsCount = results.items[0].ratings.length;
            console.log("Totals Initial: ", totalRatingsCount)

            let userId = results.items[0]._id;
            session.setItem("thisUser", userId)
            console.log("Ratings:", userRatings)
            console.log("userId:", userId)
            let firstLoadCount = 0;

            if (userRatings !== undefined && userRatings.length > 0) {

                let totalCount = userRatings.length;

                userRatings.forEach(function (rating) {

                    countedTotal++
                    console.log("All For Each Totals: ", countedTotal, allApproved)

                    //let approvedCount = 0;

                    let allApprovedRatings = ratingsApproved.length;

                    const finishedCount = () => {

                        console.log("Finished Count Running", ratingsApproved.length, count)

                        if (count == 3 || ratingsApproved.length == count) {

                            console.log("Current Count of Loaded Is: ", count)

                            let reviewsRepeater = $w('#reviewsList')

                            reviewsRepeater.data = newItems;

                            console.log("Features Data: ", reviewsRepeater.data)
                            console.log("Tester")

                            reviewsRepeater.onItemReady(($item, itemData) => {
                                console.log(itemData.item)

                                reviewsRepeater.forEachItem(($item, itemData, index) => {

                                    let rated = itemData.rating

                                    $item('#reviewerName').text = itemData.name;
                                    $item('#reviewerText').text = itemData.comment;
                                    $w("#reviewsList").expand();

                                    

                                    if (Number(rated) == 1) {
                                        $item("#s1b").show();
                                        $item("#s2b").hide();
                                        $item("#s3b").hide();
                                        $item("#s4b").hide();
                                        $item("#s5b").hide();

                                        //$item("#b1b").hide();
                                        //$item("#b2b").show();
                                        //$item("#b3b").show();
                                        //$item("#b4b").show();
                                        //$item("#b5b").show();

                                    }

                                    if (Number(rated) == 2) {
                                        $item("#s1b").show();
                                        $item("#s2b").show();
                                        $item("#s3b").hide();
                                        $item("#s4b").hide();
                                        $item("#s5b").hide();

                                        //$item("#b1b").hide();
                                        //$item("#b2b").hide();
                                        //$item("#b3b").show();
                                        //$item("#b4b").show();
                                        //$item("#b5b").show();

                                    }

                                    if (Number(rated) == 3) {
                                        $item("#s1b").show();
                                        $item("#s2b").show();
                                        $item("#s3b").show();
                                        $item("#s4b").hide();
                                        $item("#s5b").hide();

                                        //$item("#b1b").hide();
                                        //$item("#b2b").hide();
                                        //$item("#b3b").hide();
                                        //$item("#b4b").show();
                                        //$item("#b5b").show();

                                    }

                                    if (Number(rated) == 4) {

                                        $item("#s1b").show();
                                        $item("#s2b").show();
                                        $item("#s3b").show();
                                        $item("#s4b").show();
                                        $item("#s5b").hide();

                                        //$item("#b1b").hide();
                                        //$item("#b2b").hide();
                                        //$item("#b3b").hide();
                                        //$item("#b4b").hide();
                                        //$item("#b5b").show();

                                    }

                                    if (Number(rated) == 5) {
                                        $item("#s1b").show();
                                        $item("#s2b").show();
                                        $item("#s3b").show();
                                        $item("#s4b").show();
                                        $item("#s5b").show();

                                        //$item("#b1b").hide();
                                        //$item("#b2b").hide();
                                        //$item("#b3b").hide();
                                        //$item("#b4b").hide();
                                        //$item("#b5b").hide();

                                    }

                                });

                            })

                            console.log("Show Button: ", count, allApprovedRatings);

                        } // if count is 3

                    }

                    if (rating.status == "Approved") {

                        //approvedCount++

                        ratingsApproved.push(rating); //Remove for final push
                        console.log("Approved", ratingsApproved) //Remove for final push

                        console.log("Current Ratings: ", ratings)

                        allRatings.push(rating) //All User Ratings

                        console.log("This Rating: ", rating.rating)

                        //**Written Reviews Widget**//

                        console.log("Totals Approved: ", allApprovedRatings)
                        console.log("Totals Counted Total: ", countedTotal)
                        console.log("Totals Ratings: ", totalRatingsCount)

                        console.log("New Items: ", newItems)

                        console.log("This Person: ", ratingsApproved[count])

                        finishedCount();

                    }

                    //here

                    /*
                    if(count == totalCount){

                        loadRepeaterData(ratingsApproved)

                    

                    }
                    */

                    if (countedTotal == totalRatingsCount) {

                        if (ratingsApproved[count] !== undefined && count <= thisTotal) {
                            newItems.push(ratingsApproved[count])
                            console.log("Current Count 1: ", count)
                            count++
                        }

                        if (ratingsApproved[count] !== undefined && count <= thisTotal) {
                            newItems.push(ratingsApproved[count])
                            console.log("Current Count 2: ", count)
                            count++
                        }

                        if (ratingsApproved[count] !== undefined && count <= thisTotal) {
                            newItems.push(ratingsApproved[count])
                            console.log("Current Count 3: ", count)
                            count++
                            console.log("Current Count of Third: ", count)
                        }

                        finishedCount();

                        if (allApprovedRatings > 3) {

                            console.log("Show Button Greater than 3 Line 391")
                            $w('#loadMore').show();
                            console.log("Current Count of Loaded: ", count)
                        }

                    }

                }) //end of foreach
            }

        })

}


export function getReviewsTwo(email, status) {
    ratingsApproved = null;
    ratingsApproved = [];
    let thisTotal = 3
    let newItems = null;
    newItems = [];
    let countedTotal = 0

    console.log("Get Ratings:")

    wixData.query("Team")
        .eq("email", email)
        .find()
        .then((results) => {
            console.log("Found user", results)

            let userRatings = results.items[0].ratings;
            let totalRatingsCount = results.items[0].ratings.length;
            console.log("Totals Initial: ", totalRatingsCount)

            let userId = results.items[0]._id;
            session.setItem("thisUser", userId)
            console.log("Ratings:", userRatings)
            console.log("userId:", userId)
            let firstLoadCount = 0;

            if (userRatings !== undefined && userRatings.length > 0) {

                let totalCount = userRatings.length;

                userRatings.forEach(function (rating) {

                    countedTotal++
                    console.log("All For Each Totals: ", countedTotal, allApproved)

                    //let approvedCount = 0;

                    let allApprovedRatings = ratingsApproved.length;

                    const finishedCount = () => {

                        console.log("Finished Count Running", ratingsApproved.length, count)

                        if (count == 3 || ratingsApproved.length == count) {

                            console.log("Current Count of Loaded Is: ", count)

                            let reviewsRepeater = $w('#reviewsListt2')

                            reviewsRepeater.data = newItems;

                            console.log("Features Data: ", reviewsRepeater.data)
                            console.log("Tester")

                            reviewsRepeater.onItemReady(($item, itemData) => {
                                console.log(itemData.item)

                                reviewsRepeater.forEachItem(($item, itemData, index) => {

                                    let rated = itemData.rating

                                    $item('#reviewerNamet2').text = itemData.name;
                                    $item('#reviewerTextt2').text = itemData.comment;
                                    $w("#reviewsListt2").expand();

                                    

                                    if (Number(rated) == 1) {
                                        $item("#s1bt2").show();
                                        $item("#s2bt2").hide();
                                        $item("#s3bt2").hide();
                                        $item("#s4bt2").hide();
                                        $item("#s5bt2").hide();

                                        //$item("#b1b").hide();
                                        //$item("#b2b").show();
                                        //$item("#b3b").show();
                                        //$item("#b4b").show();
                                        //$item("#b5b").show();

                                    }

                                    if (Number(rated) == 2) {
                                        $item("#s1bt2").show();
                                        $item("#s2bt2").show();
                                        $item("#s3bt2").hide();
                                        $item("#s4bt2").hide();
                                        $item("#s5bt2").hide();

                                        //$item("#b1b").hide();
                                        //$item("#b2b").hide();
                                        //$item("#b3b").show();
                                        //$item("#b4b").show();
                                        //$item("#b5b").show();

                                    }

                                    if (Number(rated) == 3) {
                                        $item("#s1bt2").show();
                                        $item("#s2bt2").show();
                                        $item("#s3bt2").show();
                                        $item("#s4bt2").hide();
                                        $item("#s5bt2").hide();

                                        //$item("#b1b").hide();
                                        //$item("#b2b").hide();
                                        //$item("#b3b").hide();
                                        //$item("#b4b").show();
                                        //$item("#b5b").show();

                                    }

                                    if (Number(rated) == 4) {

                                        $item("#s1bt2").show();
                                        $item("#s2bt2").show();
                                        $item("#s3bt2").show();
                                        $item("#s4bt2").show();
                                        $item("#s5bt2").hide();

                                        //$item("#b1b").hide();
                                        //$item("#b2b").hide();
                                        //$item("#b3b").hide();
                                        //$item("#b4b").hide();
                                        //$item("#b5b").show();

                                    }

                                    if (Number(rated) == 5) {
                                        $item("#s1bt2").show();
                                        $item("#s2bt2").show();
                                        $item("#s3bt2").show();
                                        $item("#s4bt2").show();
                                        $item("#s5bt2").show();

                                        //$item("#b1b").hide();
                                        //$item("#b2b").hide();
                                        //$item("#b3b").hide();
                                        //$item("#b4b").hide();
                                        //$item("#b5b").hide();

                                    }

                                });

                            })

                            console.log("Show Button: ", count, allApprovedRatings);

                        } // if count is 3

                    }

                    if (rating.status == "Approved") {

                        //approvedCount++

                        ratingsApproved.push(rating); //Remove for final push
                        console.log("Approved", ratingsApproved) //Remove for final push

                        console.log("Current Ratings: ", ratings)

                        allRatings.push(rating) //All User Ratings

                        console.log("This Rating: ", rating.rating)

                        //**Written Reviews Widget**//

                        console.log("Totals Approved: ", allApprovedRatings)
                        console.log("Totals Counted Total: ", countedTotal)
                        console.log("Totals Ratings: ", totalRatingsCount)

                        console.log("New Items: ", newItems)

                        console.log("This Person: ", ratingsApproved[count])

                        finishedCount();

                    }

                    //here

                    /*
                    if(count == totalCount){

                        loadRepeaterData(ratingsApproved)

                    

                    }
                    */

                    if (countedTotal == totalRatingsCount) {

                        if (ratingsApproved[count] !== undefined && count <= thisTotal) {
                            newItems.push(ratingsApproved[count])
                            console.log("Current Count 1: ", count)
                            count++
                        }

                        if (ratingsApproved[count] !== undefined && count <= thisTotal) {
                            newItems.push(ratingsApproved[count])
                            console.log("Current Count 2: ", count)
                            count++
                        }

                        if (ratingsApproved[count] !== undefined && count <= thisTotal) {
                            newItems.push(ratingsApproved[count])
                            console.log("Current Count 3: ", count)
                            count++
                            console.log("Current Count of Third: ", count)
                        }

                        finishedCount();
                        

                        if (allApprovedRatings > 3) {

                            console.log("Show Button Greater than 3 Line 391")
                            $w('#loadMoret2').show();
                            console.log("Current Count of Loaded: ", count)
                        }

                    }

                }) //end of foreach
            }

        })

}

export function getReviewsOne(email, status) {
    ratingsApproved = null;
    ratingsApproved = [];
    let thisTotal = 3
    let newItems = null;
    newItems = [];
    let countedTotal = 0

    console.log("Get Ratings:")

    wixData.query("Team")
        .eq("email", email)
        .find()
        .then((results) => {
            console.log("Found user", results)

            let userRatings = results.items[0].ratings;
            let totalRatingsCount = results.items[0].ratings.length;
            console.log("Totals Initial: ", totalRatingsCount)

            let userId = results.items[0]._id;
            session.setItem("thisUser", userId)
            console.log("Ratings:", userRatings)
            console.log("userId:", userId)
            let firstLoadCount = 0;

            if (userRatings !== undefined && userRatings.length > 0) {

                let totalCount = userRatings.length;

                userRatings.forEach(function (rating) {

                    countedTotal++
                    console.log("All For Each Totals: ", countedTotal, allApproved)

                    //let approvedCount = 0;

                    let allApprovedRatings = ratingsApproved.length;

                    const finishedCount = () => {

                        console.log("Finished Count Running", ratingsApproved.length, count)

                        if (count == 3 || ratingsApproved.length == count) {

                                console.log("Current Count of Loaded Is: ", count)

                                let reviewsRepeater = $w('#reviewsListt1')

                                reviewsRepeater.data = newItems;

                                console.log("Features Data: ", reviewsRepeater.data)
                                console.log("Tester")

                                reviewsRepeater.onItemReady(($item, itemData) => {
                                    console.log(itemData.item)

                                    reviewsRepeater.forEachItem(($item, itemData, index) => {

                                        let rated = itemData.rating

                                        $item('#reviewerNamet1').text = itemData.name;
                                        $item('#reviewerTextt1').text = itemData.comment;
                                        $w("#reviewsListt1").expand();

                                        

                                        if (Number(rated) == 1) {
                                            $item("#s1bt1").show();
                                            $item("#s2bt1").hide();
                                            $item("#s3bt1").hide();
                                            $item("#s4bt1").hide();
                                            $item("#s5bt1").hide();

                                            //$item("#b1b").hide();
                                            //$item("#b2b").show();
                                            //$item("#b3b").show();
                                            //$item("#b4b").show();
                                            //$item("#b5b").show();

                                        }

                                        if (Number(rated) == 2) {
                                            $item("#s1bt1").show();
                                            $item("#s2bt1").show();
                                            $item("#s3bt1").hide();
                                            $item("#s4bt1").hide();
                                            $item("#s5bt1").hide();

                                            //$item("#b1b").hide();
                                            //$item("#b2b").hide();
                                            //$item("#b3b").show();
                                            //$item("#b4b").show();
                                            //$item("#b5b").show();

                                        }

                                        if (Number(rated) == 3) {
                                            $item("#s1bt1").show();
                                            $item("#s2bt1").show();
                                            $item("#s3bt1").show();
                                            $item("#s4bt1").hide();
                                            $item("#s5bt1").hide();

                                            //$item("#b1b").hide();
                                            //$item("#b2b").hide();
                                            //$item("#b3b").hide();
                                            //$item("#b4b").show();
                                            //$item("#b5b").show();

                                        }

                                        if (Number(rated) == 4) {

                                            $item("#s1bt1").show();
                                            $item("#s2bt1").show();
                                            $item("#s3bt1").show();
                                            $item("#s4bt1").show();
                                            $item("#s5bt1").hide();

                                            //$item("#b1b").hide();
                                            //$item("#b2b").hide();
                                            //$item("#b3b").hide();
                                            //$item("#b4b").hide();
                                            //$item("#b5b").show();

                                        }

                                        if (Number(rated) == 5) {
                                            $item("#s1bt1").show();
                                            $item("#s2bt1").show();
                                            $item("#s3bt1").show();
                                            $item("#s4bt1").show();
                                            $item("#s5bt1").show();

                                            //$item("#b1b").hide();
                                            //$item("#b2b").hide();
                                            //$item("#b3b").hide();
                                            //$item("#b4b").hide();
                                            //$item("#b5b").hide();

                                        }

                                    });

                                })

                                console.log("Show Button: ", count, allApprovedRatings);

                            }

                        

                    }

                    if (rating.status == "Approved") {

                        //approvedCount++

                        ratingsApproved.push(rating); //Remove for final push
                        console.log("Approved", ratingsApproved) //Remove for final push

                        console.log("Current Ratings: ", ratings)

                        allRatings.push(rating) //All User Ratings

                        console.log("This Rating: ", rating.rating)

                        //**Written Reviews Widget**//

                        console.log("Totals Approved: ", allApprovedRatings)
                        console.log("Totals Counted Total: ", countedTotal)
                        console.log("Totals Ratings: ", totalRatingsCount)

                        console.log("New Items: ", newItems)

                        console.log("This Person: ", ratingsApproved[count])

                        finishedCount();

                    }


                    /*
                    if(count == totalCount){

                        loadRepeaterData(ratingsApproved)

                    

                    }
                    */

                    if (countedTotal == totalRatingsCount) {

                            if (ratingsApproved[count] !== undefined && count <= thisTotal) {
                                newItems.push(ratingsApproved[count])
                                console.log("Current Count 1: ", count)
                                count++
                                console.log("Updated: ", count, allApprovedRatings)
                            }

                            if (ratingsApproved[count] !== undefined && count <= thisTotal) {
                                newItems.push(ratingsApproved[count])
                                console.log("Current Count 2: ", count)
                                count++
                            }

                            if (ratingsApproved[count] !== undefined && count <= thisTotal) {
                                newItems.push(ratingsApproved[count])
                                console.log("Current Count 3: ", count)
                                count++
                                console.log("Current Count of Third: ", count)
                            }

                            finishedCount();

                            if (allApprovedRatings > 3) {

                                console.log("Show Button Greater than 3 Line 391")
                                $w('#loadMoret1').show();
                                console.log("Current Count of Loaded: ", count)
                            }

                        }
                    

                }) //end of foreach
            }

        })

}

export function loadRepeaterData(repeaterData) {

    let reviewsRepeater = $w('#reviewsList')

    reviewsRepeater.data = [];

    reviewsRepeater.data = repeaterData
    console.log("Repeater Data: ", reviewsRepeater.data)

    reviewsRepeater.onItemReady(($item, itemData) => {

        let rated = itemData.rating

        $item('#reviewerName').text = itemData.name;
        $item('#reviewerText').text = itemData.comment;
        $w("#reviewsList").expand();

        if (Number(rated) == 1) {
            $item("#s1b").show();
            $item("#s2b").hide();
            $item("#s3b").hide();
            $item("#s4b").hide();
            $item("#s5b").hide();

            //$item("#b1b").hide();
            //$item("#b2b").show();
            //$item("#b3b").show();
            //$item("#b4b").show();
            //$item("#b5b").show();

        }

        if (Number(rated) == 2) {
            $item("#s1b").show();
            $item("#s2b").show();
            $item("#s3b").hide();
            $item("#s4b").hide();
            $item("#s5b").hide();

            //$item("#b1b").hide();
            //$item("#b2b").hide();
            //$item("#b3b").show();
            //$item("#b4b").show();
            //$item("#b5b").show();

        }

        if (Number(rated) == 3) {
            $item("#s1b").show();
            $item("#s2b").show();
            $item("#s3b").show();
            $item("#s4b").hide();
            $item("#s5b").hide();

            //$item("#b1b").hide();
            //$item("#b2b").hide();
            //$item("#b3b").hide();
            //$item("#b4b").show();
            //$item("#b5b").show();

        }

        if (Number(rated) == 4) {

            $item("#s1b").show();
            $item("#s2b").show();
            $item("#s3b").show();
            $item("#s4b").show();
            $item("#s5b").hide();

            //$item("#b1b").hide();
            //$item("#b2b").hide();
            //$item("#b3b").hide();
            //$item("#b4b").hide();
            //$item("#b5b").show();

        }

        if (Number(rated) == 5) {
            $item("#s1b").show();
            $item("#s2b").show();
            $item("#s3b").show();
            $item("#s4b").show();
            $item("#s5b").show();

            //$item("#b1b").hide();
            //$item("#b2b").hide();
            //$item("#b3b").hide();
            //$item("#b4b").hide();
            //$item("#b5b").hide();

        }

        $item("#reviewsList").expand();
        $item("#line18").expand();

    })

}

export function loadMore_click(event) {
    loadMoreFunction()
}

export function loadMoreFunction() { //--Template Three--//
    console.log("loadMore")
    session.setItem("Clicked", "Start")
    console.log("Current Count: ", count)

    let allItems = ratingsApproved.length
    let total = ratingsApproved.length
    console.log("All Items: ", allItems, total)
    console.log(ratingsApproved[0])

    if (ratingsApproved !== undefined && ratingsApproved !== "") {

        console.log("Data: ", ratingsApproved, count)
        let newItems = [];

        if (ratingsApproved[count] !== undefined && count < allItems) {
            console.log("Added: ", ratingsApproved[count])
            newItems.push(ratingsApproved[count])
            count++
            console.log("Count", allItems, total)
            session.setItem("Clicked", "Pending")
        }

        if (ratingsApproved[count] !== undefined && count < allItems) {
            console.log("Added: ", ratingsApproved[count])
            newItems.push(ratingsApproved[count])
            count++
            console.log("Count", allItems, total)
            session.setItem("Clicked", "Pending")
        }

        if (ratingsApproved[count] !== undefined && count < allItems) {
            console.log("Added: ", ratingsApproved[count])
            newItems.push(ratingsApproved[count])
            count++
            console.log("Count", allItems, total)
            session.setItem("Clicked", "Pending")
        }

        let getStatus = session.getItem("Clicked")

        if ($w('#reviewsList').data.length < 3 || (count == total && getStatus == "Start")) { 

            console.log("RESTART")

            count = 0
            //count ++
            let thisTotal = 3

            console.log("This Person: ", ratingsApproved[count])
            if (ratingsApproved[count] !== undefined && count <= thisTotal) {
                console.log("Added Restart: ", ratingsApproved[count])
                newItems.push(ratingsApproved[count])
                count++
            }

            if (ratingsApproved[count] !== undefined && count <= thisTotal) {
                console.log("Added Restart 2: ", ratingsApproved[count])
                newItems.push(ratingsApproved[count])
                count++
            }

            if (ratingsApproved[count] !== undefined && count <= thisTotal) {
                console.log("Added Restart 3: ", ratingsApproved[count])
                newItems.push(ratingsApproved[count])
                count++
            }

            if (count == 3) {

                let reviewsList = $w('#reviewsList')

                reviewsList.data = newItems;

                console.log("Reviews Data Count is 3: ", reviewsList.data)

                reviewsList.onItemReady(($item, itemData) => {

                    let rated = itemData.rating

                    $item('#reviewerName').text = itemData.name;
                    $item('#reviewerText').text = itemData.comment;
                    $w("#reviewsList").expand();

                    if (Number(rated) == 1) {
                        $item("#s1b").show();
                        $item("#s2b").hide();
                        $item("#s3b").hide();
                        $item("#s4b").hide();
                        $item("#s5b").hide();

                        //$item("#b1b").hide();
                        //$item("#b2b").show();
                        //$item("#b3b").show();
                        //$item("#b4b").show();
                        //$item("#b5b").show();

                    }

                    if (Number(rated) == 2) {
                        $item("#s1b").show();
                        $item("#s2b").show();
                        $item("#s3b").hide();
                        $item("#s4b").hide();
                        $item("#s5b").hide();

                        //$item("#b1b").hide();
                        //$item("#b2b").hide();
                        //$item("#b3b").show();
                        //$item("#b4b").show();
                        //$item("#b5b").show();

                    }

                    if (Number(rated) == 3) {
                        $item("#s1b").show();
                        $item("#s2b").show();
                        $item("#s3b").show();
                        $item("#s4b").hide();
                        $item("#s5b").hide();

                        //$item("#b1b").hide();
                        //$item("#b2b").hide();
                        //$item("#b3b").hide();
                        //$item("#b4b").show();
                        //$item("#b5b").show();

                    }

                    if (Number(rated) == 4) {

                        $item("#s1b").show();
                        $item("#s2b").show();
                        $item("#s3b").show();
                        $item("#s4b").show();
                        $item("#s5b").hide();

                        //$item("#b1b").hide();
                        //$item("#b2b").hide();
                        //$item("#b3b").hide();
                        //$item("#b4b").hide();
                        //$item("#b5b").show();

                    }

                    if (Number(rated) == 5) {
                        $item("#s1b").show();
                        $item("#s2b").show();
                        $item("#s3b").show();
                        $item("#s4b").show();
                        $item("#s5b").show();

                        //$item("#b1b").hide();
                        //$item("#b2b").hide();
                        //$item("#b3b").hide();
                        //$item("#b4b").hide();
                        //$item("#b5b").hide();

                    }

                })

            }

        }

        let reviewsList = $w('#reviewsList')

        reviewsList.data = newItems;
        console.log("Reviews Data: ", reviewsList.data)

        reviewsList.onItemReady(($item, itemData) => {

            let rated = itemData.rating

            $item('#reviewerName').text = itemData.name;
            $item('#reviewerText').text = itemData.comment;
            $w("#reviewsList").expand();

            if (Number(rated) == 1) {
                $item("#s1b").show();
                $item("#s2b").hide();
                $item("#s3b").hide();
                $item("#s4b").hide();
                $item("#s5b").hide();

                //$item("#b1b").hide();
                //$item("#b2b").show();
                //$item("#b3b").show();
                //$item("#b4b").show();
                //$item("#b5b").show();

            }

            if (Number(rated) == 2) {
                $item("#s1b").show();
                $item("#s2b").show();
                $item("#s3b").hide();
                $item("#s4b").hide();
                $item("#s5b").hide();

                //$item("#b1b").hide();
                //$item("#b2b").hide();
                //$item("#b3b").show();
                //$item("#b4b").show();
                //$item("#b5b").show();

            }

            if (Number(rated) == 3) {
                $item("#s1b").show();
                $item("#s2b").show();
                $item("#s3b").show();
                $item("#s4b").hide();
                $item("#s5b").hide();

                //$item("#b1b").hide();
                //$item("#b2b").hide();
                //$item("#b3b").hide();
                //$item("#b4b").show();
                //$item("#b5b").show();

            }

            if (Number(rated) == 4) {

                $item("#s1b").show();
                $item("#s2b").show();
                $item("#s3b").show();
                $item("#s4b").show();
                $item("#s5b").hide();

                //$item("#b1b").hide();
                //$item("#b2b").hide();
                //$item("#b3b").hide();
                //$item("#b4b").hide();
                //$item("#b5b").show();

            }

            if (Number(rated) == 5) {
                $item("#s1b").show();
                $item("#s2b").show();
                $item("#s3b").show();
                $item("#s4b").show();
                $item("#s5b").show();

                //$item("#b1b").hide();
                //$item("#b2b").hide();
                //$item("#b3b").hide();
                //$item("#b4b").hide();
                //$item("#b5b").hide();

            }

        })
        session.setItem("Clicked", "End")


    }

}

export function loadMoreFunctionTwo() {
    console.log("loadMore")
    session.setItem("Clicked", "Start")
    console.log("Current Count: ", count)

    let allItems = ratingsApproved.length
    let total = ratingsApproved.length
    console.log("All Items: ", allItems, total)
    console.log(ratingsApproved[0])

    if (ratingsApproved !== undefined && ratingsApproved !== "") {

        console.log("Data: ", ratingsApproved, count)
        let newItems = [];

        if (ratingsApproved[count] !== undefined && count < allItems) {
            console.log("Added: ", ratingsApproved[count])
            newItems.push(ratingsApproved[count])
            count++
            console.log("Count", allItems, total)
            session.setItem("Clicked", "Pending")
        }

        if (ratingsApproved[count] !== undefined && count < allItems) {
            console.log("Added: ", ratingsApproved[count])
            newItems.push(ratingsApproved[count])
            count++
            console.log("Count", allItems, total)
            session.setItem("Clicked", "Pending")
        }

        if (ratingsApproved[count] !== undefined && count < allItems) {
            console.log("Added: ", ratingsApproved[count])
            newItems.push(ratingsApproved[count])
            count++
            console.log("Count", allItems, total)
            session.setItem("Clicked", "Pending")
        }

        let getStatus = session.getItem("Clicked")

        if ($w('#reviewsListt2').data.length < 3 || (count == total && getStatus == "Start")) { 

            console.log("RESTART")

            count = 0
            //count ++
            let thisTotal = 3

            console.log("This Person: ", ratingsApproved[count])
            if (ratingsApproved[count] !== undefined && count <= thisTotal) {
                console.log("Added Restart: ", ratingsApproved[count])
                newItems.push(ratingsApproved[count])
                count++
            }

            if (ratingsApproved[count] !== undefined && count <= thisTotal) {
                console.log("Added Restart 2: ", ratingsApproved[count])
                newItems.push(ratingsApproved[count])
                count++
            }

            if (ratingsApproved[count] !== undefined && count <= thisTotal) {
                console.log("Added Restart 3: ", ratingsApproved[count])
                newItems.push(ratingsApproved[count])
                count++
            }

            if (count == 3) {

                let reviewsList = $w('#reviewsListt2')

                reviewsList.data = newItems;

                console.log("Reviews Data Count is 3: ", reviewsList.data)

                reviewsList.onItemReady(($item, itemData) => {

                    let rated = itemData.rating

                    $item('#reviewerNamet2').text = itemData.name;
                    $item('#reviewerTextt2').text = itemData.comment;
                    $w("#reviewsListt2").expand();

                    if (Number(rated) == 1) {
                        $item("#s1bt2").show();
                        $item("#s2bt2").hide();
                        $item("#s3bt2").hide();
                        $item("#s4bt2").hide();
                        $item("#s5bt2").hide();

                        //$item("#b1b").hide();
                        //$item("#b2b").show();
                        //$item("#b3b").show();
                        //$item("#b4b").show();
                        //$item("#b5b").show();

                    }

                    if (Number(rated) == 2) {
                        $item("#s1bt2").show();
                        $item("#s2bt2").show();
                        $item("#s3bt2").hide();
                        $item("#s4bt2").hide();
                        $item("#s5bt2").hide();

                        //$item("#b1b").hide();
                        //$item("#b2b").hide();
                        //$item("#b3b").show();
                        //$item("#b4b").show();
                        //$item("#b5b").show();

                    }

                    if (Number(rated) == 3) {
                        $item("#s1bt2").show();
                        $item("#s2bt2").show();
                        $item("#s3bt2").show();
                        $item("#s4bt2").hide();
                        $item("#s5bt2").hide();

                        //$item("#b1b").hide();
                        //$item("#b2b").hide();
                        //$item("#b3b").hide();
                        //$item("#b4b").show();
                        //$item("#b5b").show();

                    }

                    if (Number(rated) == 4) {

                        $item("#s1bt2").show();
                        $item("#s2bt2").show();
                        $item("#s3bt2").show();
                        $item("#s4bt2").show();
                        $item("#s5bt2").hide();

                        //$item("#b1b").hide();
                        //$item("#b2b").hide();
                        //$item("#b3b").hide();
                        //$item("#b4b").hide();
                        //$item("#b5b").show();

                    }

                    if (Number(rated) == 5) {
                        $item("#s1bt2").show();
                        $item("#s2bt2").show();
                        $item("#s3bt2").show();
                        $item("#s4bt2").show();
                        $item("#s5bt2").show();

                        //$item("#b1b").hide();
                        //$item("#b2b").hide();
                        //$item("#b3b").hide();
                        //$item("#b4b").hide();
                        //$item("#b5b").hide();

                    }

                })

            }

        }

        let reviewsList = $w('#reviewsListt2')

        reviewsList.data = newItems;
        console.log("Reviews Data: ", reviewsList.data)

        reviewsList.onItemReady(($item, itemData) => {

            let rated = itemData.rating

            $item('#reviewerNamet2').text = itemData.name;
            $item('#reviewerTextt2').text = itemData.comment;
            $w("#reviewsListt2").expand();

            if (Number(rated) == 1) {
                $item("#s1bt2").show();
                $item("#s2bt2").hide();
                $item("#s3bt2").hide();
                $item("#s4bt2").hide();
                $item("#s5bt2").hide();

                //$item("#b1b").hide();
                //$item("#b2b").show();
                //$item("#b3b").show();
                //$item("#b4b").show();
                //$item("#b5b").show();

            }

            if (Number(rated) == 2) {
                $item("#s1bt2").show();
                $item("#s2bt2").show();
                $item("#s3bt2").hide();
                $item("#s4bt2").hide();
                $item("#s5bt2").hide();

                //$item("#b1b").hide();
                //$item("#b2b").hide();
                //$item("#b3b").show();
                //$item("#b4b").show();
                //$item("#b5b").show();

            }

            if (Number(rated) == 3) {
                $item("#s1bt2").show();
                $item("#s2bt2").show();
                $item("#s3bt2").show();
                $item("#s4bt2").hide();
                $item("#s5bt2").hide();

                //$item("#b1b").hide();
                //$item("#b2b").hide();
                //$item("#b3b").hide();
                //$item("#b4b").show();
                //$item("#b5b").show();

            }

            if (Number(rated) == 4) {

                $item("#s1bt2").show();
                $item("#s2bt2").show();
                $item("#s3bt2").show();
                $item("#s4bt2").show();
                $item("#s5bt2").hide();

                //$item("#b1b").hide();
                //$item("#b2b").hide();
                //$item("#b3b").hide();
                //$item("#b4b").hide();
                //$item("#b5b").show();

            }

            if (Number(rated) == 5) {
                $item("#s1bt2").show();
                $item("#s2bt2").show();
                $item("#s3bt2").show();
                $item("#s4bt2").show();
                $item("#s5bt2").show();

                //$item("#b1b").hide();
                //$item("#b2b").hide();
                //$item("#b3b").hide();
                //$item("#b4b").hide();
                //$item("#b5b").hide();

            }

        })
        session.setItem("Clicked", "End")


    }

}

export function loadMoreFunctionOne() {
    console.log("loadMore")
    session.setItem("Clicked", "Start")
    console.log("Current Count: ", count)

    let allItems = ratingsApproved.length
    let total = ratingsApproved.length
    console.log("All Items: ", allItems, total)
    console.log(ratingsApproved[0])

    if (ratingsApproved !== undefined && ratingsApproved !== "") {

        console.log("Data: ", ratingsApproved, count)
        let newItems = [];

        if (ratingsApproved[count] !== undefined && count < allItems) {
            console.log("Added: ", ratingsApproved[count])
            newItems.push(ratingsApproved[count])
            count++
            console.log("Count", allItems, total)
            session.setItem("Clicked", "Pending")
        }

        if (ratingsApproved[count] !== undefined && count < allItems) {
            console.log("Added: ", ratingsApproved[count])
            newItems.push(ratingsApproved[count])
            count++
            console.log("Count", allItems, total)
            session.setItem("Clicked", "Pending")
        }

        if (ratingsApproved[count] !== undefined && count < allItems) {
            console.log("Added: ", ratingsApproved[count])
            newItems.push(ratingsApproved[count])
            count++
            console.log("Count", allItems, total)
            session.setItem("Clicked", "Pending")
        }

        let getStatus = session.getItem("Clicked")

        if ($w('#reviewsListt1').data.length < 3 || (count == total && getStatus == "Start")) { 

            console.log("RESTART")

            count = 0
            //count ++
            let thisTotal = 3

            console.log("This Person: ", ratingsApproved[count])
            if (ratingsApproved[count] !== undefined && count <= thisTotal) {
                console.log("Added Restart: ", ratingsApproved[count])
                newItems.push(ratingsApproved[count])
                count++
            }

            if (ratingsApproved[count] !== undefined && count <= thisTotal) {
                console.log("Added Restart 2: ", ratingsApproved[count])
                newItems.push(ratingsApproved[count])
                count++
            }

            if (ratingsApproved[count] !== undefined && count <= thisTotal) {
                console.log("Added Restart 3: ", ratingsApproved[count])
                newItems.push(ratingsApproved[count])
                count++
            }

            if (count == 3) {

                let reviewsList = $w('#reviewsListt1')

                reviewsList.data = newItems;

                console.log("Reviews Data Count is 3: ", reviewsList.data)

                reviewsList.onItemReady(($item, itemData) => {

                    let rated = itemData.rating

                    $item('#reviewerNamet1').text = itemData.name;
                    $item('#reviewerTextt1').text = itemData.comment;
                    $w("#reviewsListt1").expand();

                    if (Number(rated) == 1) {
                        $item("#s1bt1").show();
                        $item("#s2bt1").hide();
                        $item("#s3bt1").hide();
                        $item("#s4bt1").hide();
                        $item("#s5bt1").hide();

                        //$item("#b1b").hide();
                        //$item("#b2b").show();
                        //$item("#b3b").show();
                        //$item("#b4b").show();
                        //$item("#b5b").show();

                    }

                    if (Number(rated) == 2) {
                        $item("#s1bt1").show();
                        $item("#s2bt1").show();
                        $item("#s3bt1").hide();
                        $item("#s4bt1").hide();
                        $item("#s5bt1").hide();

                        //$item("#b1b").hide();
                        //$item("#b2b").hide();
                        //$item("#b3b").show();
                        //$item("#b4b").show();
                        //$item("#b5b").show();

                    }

                    if (Number(rated) == 3) {
                        $item("#s1bt1").show();
                        $item("#s2bt1").show();
                        $item("#s3bt1").show();
                        $item("#s4bt1").hide();
                        $item("#s5bt1").hide();

                        //$item("#b1b").hide();
                        //$item("#b2b").hide();
                        //$item("#b3b").hide();
                        //$item("#b4b").show();
                        //$item("#b5b").show();

                    }

                    if (Number(rated) == 4) {

                        $item("#s1bt1").show();
                        $item("#s2bt1").show();
                        $item("#s3bt1").show();
                        $item("#s4bt1").show();
                        $item("#s5bt1").hide();

                        //$item("#b1b").hide();
                        //$item("#b2b").hide();
                        //$item("#b3b").hide();
                        //$item("#b4b").hide();
                        //$item("#b5b").show();

                    }

                    if (Number(rated) == 5) {
                        $item("#s1bt1").show();
                        $item("#s2bt1").show();
                        $item("#s3bt1").show();
                        $item("#s4bt1").show();
                        $item("#s5bt1").show();

                        //$item("#b1b").hide();
                        //$item("#b2b").hide();
                        //$item("#b3b").hide();
                        //$item("#b4b").hide();
                        //$item("#b5b").hide();

                    }

                })

            }

        }

        let reviewsList = $w('#reviewsListt1')

        reviewsList.data = newItems;
        console.log("Reviews Data: ", reviewsList.data)

        reviewsList.onItemReady(($item, itemData) => {

            let rated = itemData.rating

            $item('#reviewerNamet1').text = itemData.name;
            $item('#reviewerTextt1').text = itemData.comment;
            $w("#reviewsListt1").expand();

            if (Number(rated) == 1) {
                $item("#s1bt1").show();
                $item("#s2bt1").hide();
                $item("#s3bt1").hide();
                $item("#s4bt1").hide();
                $item("#s5bt1").hide();

                //$item("#b1b").hide();
                //$item("#b2b").show();
                //$item("#b3b").show();
                //$item("#b4b").show();
                //$item("#b5b").show();

            }

            if (Number(rated) == 2) {
                $item("#s1bt1").show();
                $item("#s2bt1").show();
                $item("#s3bt1").hide();
                $item("#s4bt1").hide();
                $item("#s5bt1").hide();

                //$item("#b1b").hide();
                //$item("#b2b").hide();
                //$item("#b3b").show();
                //$item("#b4b").show();
                //$item("#b5b").show();

            }

            if (Number(rated) == 3) {
                $item("#s1bt1").show();
                $item("#s2bt1").show();
                $item("#s3bt1").show();
                $item("#s4bt1").hide();
                $item("#s5bt1").hide();

                //$item("#b1b").hide();
                //$item("#b2b").hide();
                //$item("#b3b").hide();
                //$item("#b4b").show();
                //$item("#b5b").show();

            }

            if (Number(rated) == 4) {

                $item("#s1bt1").show();
                $item("#s2bt1").show();
                $item("#s3bt1").show();
                $item("#s4bt1").show();
                $item("#s5bt1").hide();

                //$item("#b1b").hide();
                //$item("#b2b").hide();
                //$item("#b3b").hide();
                //$item("#b4b").hide();
                //$item("#b5b").show();

            }

            if (Number(rated) == 5) {
                $item("#s1bt1").show();
                $item("#s2bt1").show();
                $item("#s3bt1").show();
                $item("#s4bt1").show();
                $item("#s5bt1").show();

                //$item("#b1b").hide();
                //$item("#b2b").hide();
                //$item("#b3b").hide();
                //$item("#b4b").hide();
                //$item("#b5b").hide();

            }

        })
        session.setItem("Clicked", "End")


    }

}

export function getAgentRatingsAverage(id) {

    wixData.query("Team")
        .eq("_id", id)
        .find()
        .then((results) => {
            console.log("Found user", results)

            let userRatings = results.items[0].ratings;
            console.log("Ratings:", userRatings)
            let sidebarcount = 0
            let gradeTotal = 0
            let approvedTotal = 0
            let fiveProgress = 0;
            let fourProgress = 0;
            let threeProgress = 0;
            let twoProgress = 0;
            let oneProgress = 0;

            if (userRatings !== undefined) {

                let totalCount = userRatings.length;

                userRatings.forEach(function (rating) {
                    sidebarcount++

                    if (rating.status == "Approved") {

                        approvedTotal++
                        ratings.push(rating);
                        console.log("Pushed")
                        let ratingNumber = Number(rating.rating);
                        gradeTotal += ratingNumber;
                        average.push(ratingNumber);
                        console.log("Rating: ", rating)

                        if (Number(rating.rating) == 1) {

                            oneProgress++

                        }

                        if (Number(rating.rating) == 2) {

                            twoProgress++

                        }

                        if (Number(rating.rating) == 3) {

                            threeProgress++

                        }

                        if (Number(rating.rating) == 4) {

                            fourProgress++

                        }

                        if (Number(rating.rating) == 5) {

                            fiveProgress++

                        }

                    }

                    console.log("Current Ratings: ", ratings)

                    allRatings.push(rating) //All User Ratings

                    if (sidebarcount == totalCount && ratings.length > 0) {
                        let totalPushed = ratings.length;
                        console.log("Total Pushed Ratings: ", totalPushed)
                        $w("#quantity").text = "Based on " + (ratings.length).toString() + " Reviews";
                        $w("#quantityt2").text = "Based on " + (ratings.length).toString() + " Reviews";
                        $w("#quantityt1").text = "Based on " + (ratings.length).toString() + " Reviews";

                        //------------------------PROGRESS BARS---------------------------//


                        //-------TEMPLATE 1----------//

                        $w("#5starRatingsProgresst1").targetValue = approvedTotal;
                        $w("#5starRatingsProgresst1").value = fiveProgress;

                        $w("#4starRatingsProgresst1").targetValue = approvedTotal;
                        $w("#4starRatingsProgresst1").value = fourProgress;

                        $w("#3starRatingsProgresst1").targetValue = approvedTotal;
                        $w("#3starRatingsProgresst1").targetValue = threeProgress;

                        $w("#2starRatingsProgresst1").targetValue = approvedTotal;
                        $w("#2starRatingsProgresst1").targetValue = twoProgress;

                        $w("#1starRatingsProgresst1").targetValue = approvedTotal;
                        $w("#1starRatingsProgresst1").targetValue = oneProgress;



                       //-------TEMPLATE 2----------//

                        $w("#5starRatingsProgresst2").targetValue = approvedTotal;
                        $w("#5starRatingsProgresst2").value = fiveProgress;

                        $w("#4starRatingsProgresst2").targetValue = approvedTotal;
                        $w("#4starRatingsProgresst2").value = fourProgress;

                        $w("#3starRatingsProgresst2").targetValue = approvedTotal;
                        $w("#3starRatingsProgresst2").targetValue = threeProgress;

                        $w("#2starRatingsProgresst2").targetValue = approvedTotal;
                        $w("#2starRatingsProgresst2").targetValue = twoProgress;

                        $w("#1starRatingsProgresst2").targetValue = approvedTotal;
                        $w("#1starRatingsProgresst2").targetValue = oneProgress;



                        //-------TEMPLATE 3----------//
                        $w("#5starRatingsProgress").targetValue = approvedTotal;
                        $w("#5starRatingsProgress").value = fiveProgress;

                        $w("#4starRatingsProgress").targetValue = approvedTotal;
                        $w("#4starRatingsProgress").value = fourProgress;

                        $w("#3starRatingsProgress").targetValue = approvedTotal;
                        $w("#3starRatingsProgress").targetValue = threeProgress;

                        $w("#2starRatingsProgress").targetValue = approvedTotal;
                        $w("#2starRatingsProgress").targetValue = twoProgress;

                        $w("#1starRatingsProgress").targetValue = approvedTotal;
                        $w("#1starRatingsProgress").targetValue = oneProgress;

                        console.log("ALL TOTAL PROGRESS: ", fiveProgress, fourProgress, threeProgress, twoProgress, oneProgress, approvedTotal)

                        agentAverage = gradeTotal / Number(totalPushed); //Does not count hidden reviews
                        console.log("Totals", ratings.length, totalCount, agentAverage)

                        //agentAverage = gradeTotal / totalCount;
                        let roundedAverage = (Math.round(agentAverage * 2) / 2).toFixed(1)
                        $w("#agentAverage").text = roundedAverage.toString(); //-------TEMPLATE 3----------//
                        $w("#agentAveraget2").text = roundedAverage.toString(); //-------TEMPLATE 2----------//
                        $w("#agentAveraget1").text = roundedAverage.toString(); //-------TEMPLATE 1----------//

                        if (Number(roundedAverage) == 1) {

                            //--TEMPLATE 1--//

                            $w("#t1s1").show();
                            $w("#t1s2").hide();
                            $w("#t1s3").hide();
                            $w("#t1s4").hide();
                            $w("#t1s5").hide();


                            //--TEMPLATE 2--//

                            $w("#t2s1").show();
                            $w("#t2s2").hide();
                            $w("#t2s3").hide();
                            $w("#t2s4").hide();
                            $w("#t2s5").hide();
                            

                            //--TEMPLATE 3--//

                            $w("#s1").show();
                            $w("#s2").hide();
                            $w("#s3").hide();
                            $w("#s4").hide();
                            $w("#s5").hide();

                        }

                        if (Number(roundedAverage) == 1.5) {

                            //--TEMPLATE 1--//

                            $w("#t1s1").show();
                            $w("#t1h2").show();
                            $w("#t1s2").show();
                            $w("#t1s3").hide();
                            $w("#t1s4").hide();
                            $w("#t1s5").hide();

                            //--TEMPLATE 2--//

                            $w("#t2s1").show();
                            $w("#t2h2").show();
                            $w("#t2s2").show();
                            $w("#t2s3").hide();
                            $w("#t2s4").hide();
                            $w("#t2s5").hide();


                             //--TEMPLATE 3--//

                            $w("#s1").show();
                            $w("#h2").show();
                            $w("#s2").show();
                            $w("#s3").hide();
                            $w("#s4").hide();
                            $w("#s5").hide();

                        }

                        if (Number(roundedAverage) == 2) {

                            //--TEMPLATE 1--//

                            $w("#t1s1").show();
                            $w("#t1s2").show();
                            $w("#t1s3").hide();
                            $w("#t1s4").hide();
                            $w("#t1s5").hide();


                            //--TEMPLATE 2--//

                            $w("#t2s1").show();
                            $w("#t2s2").show();
                            $w("#t2s3").hide();
                            $w("#t2s4").hide();
                            $w("#t2s5").hide();

                            //--TEMPLATE 3--//

                            $w("#s1").show();
                            $w("#s2").show();
                            $w("#s3").hide();
                            $w("#s4").hide();
                            $w("#s5").hide();

                        }

                        if (Number(roundedAverage) == 2.5) {

                            //--TEMPLATE 1--//

                            $w("#t1s1").show();
                            $w("#t1h3").show();
                            $w("#t1s2").show();
                            $w("#t1s3").show();
                            $w("#t1s4").hide();
                            $w("#t1s5").hide();

                            //--TEMPLATE 2--//

                            $w("#t2s1").show();
                            $w("#t2h3").show();
                            $w("#t2s2").show();
                            $w("#t2s3").show();
                            $w("#t2s4").hide();
                            $w("#t2s5").hide();

                            //--TEMPLATE 3--//

                            $w("#s1").show();
                            $w("#h3").show();
                            $w("#s2").show();
                            $w("#s3").show();
                            $w("#s4").hide();
                            $w("#s5").hide();

                        }

                        if (Number(roundedAverage) == 3) {

                            //--TEMPLATE 1--//

                            $w("#t1s1").show();
                            $w("#t1s2").show();
                            $w("#t1s3").show();
                            $w("#t1s4").hide();
                            $w("#t1s5").hide();                            

                            //--TEMPLATE 2--//

                            $w("#t2s1").show();
                            $w("#t2s2").show();
                            $w("#t2s3").show();
                            $w("#t2s4").hide();
                            $w("#t2s5").hide();


                            //--TEMPLATE 3--//

                            $w("#s1").show();
                            $w("#s2").show();
                            $w("#s3").show();
                            $w("#s4").hide();
                            $w("#s5").hide();

                        }

                        if (Number(roundedAverage) == 3.5) {

                            //--TEMPLATE 1--//

                            $w("#t1s1").show();
                            $w("#t1h4").show();
                            $w("#t1s2").show();
                            $w("#t1s3").show();
                            $w("#t1s4").show();
                            $w("#t1s5").hide();

                            //--TEMPLATE 2--//

                            $w("#t2s1").show();
                            $w("#t2h4").show();
                            $w("#t2s2").show();
                            $w("#t2s3").show();
                            $w("#t2s4").show();
                            $w("#t2s5").hide();

                            //--TEMPLATE 3--//

                            $w("#s1").show();
                            $w("#h4").show();
                            $w("#s2").show();
                            $w("#s3").show();
                            $w("#s4").show();
                            $w("#s5").hide();

                        }

                        if (Number(roundedAverage) == 4) {

                            //--TEMPLATE 1--//

                            $w("#t1s1").show();
                            $w("#t1s2").show();
                            $w("#t1s3").show();
                            $w("#t1s4").show();
                            $w("#t1s5").hide()

                            //--TEMPLATE 2--//

                            $w("#t2s1").show();
                            $w("#t2s2").show();
                            $w("#t2s3").show();
                            $w("#t2s4").show();
                            $w("#t2s5").hide();

                            //--TEMPLATE 3--//

                            $w("#s1").show();
                            $w("#s2").show();
                            $w("#s3").show();
                            $w("#s4").show();
                            $w("#s5").hide();

                        }

                        if (Number(roundedAverage) == 4.5) {

                            //--TEMPLATE 1--//

                            $w("#t1s1").show();
                            $w("#t1h5").show();
                            $w("#t1s2").show();
                            $w("#t1s3").show();
                            $w("#t1s4").show();
                            $w("#t1s5").show();

                            //--TEMPLATE 2--//

                            $w("#t2s1").show();
                            $w("#t2h5").show();
                            $w("#t2s2").show();
                            $w("#t2s3").show();
                            $w("#t2s4").show();
                            $w("#t2s5").show();

                            //--TEMPLATE 3--//

                            $w("#s1").show();
                            $w("#h5").show();
                            $w("#s2").show();
                            $w("#s3").show();
                            $w("#s4").show();
                            $w("#s5").show();

                        }

                        if (Number(roundedAverage) == 5) {

                            //--TEMPLATE 1--//

                            $w("#t1s1").show();
                            $w("#t1s2").show();
                            $w("#t1s3").show();
                            $w("#t1s4").show();
                            $w("#t1s5").show();

                            //--TEMPLATE 2--//

                            $w("#t2s1").show();
                            $w("#t2s2").show();
                            $w("#t2s3").show();
                            $w("#t2s4").show();
                            $w("#t2s5").show();

                            //--TEMPLATE 3--//

                            $w("#s1").show();
                            $w("#s2").show();
                            $w("#s3").show();
                            $w("#s4").show();
                            $w("#s5").show();

                        }


                        $w("#quantity").expand();
                        $w("#quantityt2").expand();
                        $w("#quantityt1").expand();

                        console.log("Agent Average", agentAverage, roundedAverage, totalCount, average)

                        if (sidebarcount == totalCount && ratings.length < 1) {
                            console.log("No Ratings Approved: ", totalPushed.length, userRatings);

                            $w("#quantity").text = "No reviews";
                            $w("#quantityt2").text = "No reviews";
                            $w("#quantityt1").text = "No reviews";

                             //--TEMPLATE 3--//

                            $w("#s1").hide();
                            $w("#s2").hide();
                            $w("#s3").hide();
                            $w("#s4").hide();
                            $w("#s5").hide();

                            //--TEMPLATE 2--//

                            $w("#t2s1").hide();
                            $w("#t2s2").hide();
                            $w("#t2s3").hide();
                            $w("#t2s4").hide();
                            $w("#t2s5").hide();

                            //--TEMPLATE 1--//

                            $w("#t1s1").hide();
                            $w("#t1s2").hide();
                            $w("#t1s3").hide();
                            $w("#t1s4").hide();
                            $w("#t1s5").hide();


                        }

                    } else if (sidebarcount == totalCount && ratings.length < 1) {

                        console.log("No Ratings Approved: ", ratings.length, userRatings);

                        $w("#quantity").text = "No reviews"
                        $w("#quantityt2").text = "No reviews";
                        $w("#quantityt1").text = "No reviews";


                             //--TEMPLATE 3--//

                            $w("#s1").hide();
                            $w("#s2").hide();
                            $w("#s3").hide();
                            $w("#s4").hide();
                            $w("#s5").hide();

                            //--TEMPLATE 2--//

                            $w("#t2s1").hide();
                            $w("#t2s2").hide();
                            $w("#t2s3").hide();
                            $w("#t2s4").hide();
                            $w("#t2s5").hide();

                            //--TEMPLATE 1--//

                            $w("#t1s1").hide();
                            $w("#t1s2").hide();
                            $w("#t1s3").hide();
                            $w("#t1s4").hide();
                            $w("#t1s5").hide();

                    }

                })

            } else if (userRatings == undefined) {

                console.log("No Ratings Found for User")

                        $w("#quantity").text = "No reviews"
                        $w("#quantityt2").text = "No reviews";
                        $w("#quantityt1").text = "No reviews";


                             //--TEMPLATE 3--//

                            $w("#s1").hide();
                            $w("#s2").hide();
                            $w("#s3").hide();
                            $w("#s4").hide();
                            $w("#s5").hide();

                            //--TEMPLATE 2--//

                            $w("#t2s1").hide();
                            $w("#t2s2").hide();
                            $w("#t2s3").hide();
                            $w("#t2s4").hide();
                            $w("#t2s5").hide();

                            //--TEMPLATE 1--//

                            $w("#t1s1").hide();
                            $w("#t1s2").hide();
                            $w("#t1s3").hide();
                            $w("#t1s4").hide();
                            $w("#t1s5").hide();

            }

        })

}


export function loadMoret1_click(event) {
	loadMoreFunctionOne()
}

export function loadMoret2_click(event) {
	loadMoreFunctionTwo()
}
